var gdjs;(function(E){const t=class extends E.RuntimeBehavior{constructor(i,e,o){super(i,e,o);this._invalidDistances=!0;this._leftEdgeDistance=0;this._rightEdgeDistance=0;this._topEdgeDistance=0;this._bottomEdgeDistance=0;this._useLegacyBottomAndRightAnchors=!1;this._relativeToOriginalWindowSize=!!e.relativeToOriginalWindowSize,this._leftEdgeAnchor=e.leftEdgeAnchor,this._rightEdgeAnchor=e.rightEdgeAnchor,this._topEdgeAnchor=e.topEdgeAnchor,this._bottomEdgeAnchor=e.bottomEdgeAnchor,this._useLegacyBottomAndRightAnchors=e.useLegacyBottomAndRightAnchors===void 0?!0:e.useLegacyBottomAndRightAnchors}updateFromBehaviorData(i,e){return i.leftEdgeAnchor!==e.leftEdgeAnchor&&(this._leftEdgeAnchor=e.leftEdgeAnchor),i.rightEdgeAnchor!==e.rightEdgeAnchor&&(this._rightEdgeAnchor=e.rightEdgeAnchor),i.topEdgeAnchor!==e.topEdgeAnchor&&(this._topEdgeAnchor=e.topEdgeAnchor),i.bottomEdgeAnchor!==e.bottomEdgeAnchor&&(this._bottomEdgeAnchor=e.bottomEdgeAnchor),i.useLegacyTrajectory!==e.useLegacyTrajectory&&(this._useLegacyBottomAndRightAnchors=e.useLegacyBottomAndRightAnchors),i.relativeToOriginalWindowSize===e.relativeToOriginalWindowSize}onActivate(){this._invalidDistances=!0}doStepPreEvents(i){const e=i.getGame();let o=e.getGameResolutionWidth(),s=e.getGameResolutionHeight();const g=i.getLayer(this.owner.getLayer());if(this._invalidDistances){this._relativeToOriginalWindowSize&&(o=e.getOriginalWidth(),s=e.getOriginalHeight());const r=g.convertCoords(this.owner.getDrawableX(),this.owner.getDrawableY());this._leftEdgeAnchor===t.HorizontalAnchor.WINDOW_LEFT?this._leftEdgeDistance=r[0]:this._leftEdgeAnchor===t.HorizontalAnchor.WINDOW_RIGHT?this._leftEdgeDistance=o-r[0]:this._leftEdgeAnchor===t.HorizontalAnchor.PROPORTIONAL&&(this._leftEdgeDistance=r[0]/o),this._topEdgeAnchor===t.VerticalAnchor.WINDOW_TOP?this._topEdgeDistance=r[1]:this._topEdgeAnchor===t.VerticalAnchor.WINDOW_BOTTOM?this._topEdgeDistance=s-r[1]:this._topEdgeAnchor===t.VerticalAnchor.PROPORTIONAL&&(this._topEdgeDistance=r[1]/s);const h=g.convertCoords(this.owner.getDrawableX()+this.owner.getWidth(),this.owner.getDrawableY()+this.owner.getHeight());this._rightEdgeAnchor===t.HorizontalAnchor.WINDOW_LEFT?this._rightEdgeDistance=h[0]:this._rightEdgeAnchor===t.HorizontalAnchor.WINDOW_RIGHT?this._rightEdgeDistance=o-h[0]:this._rightEdgeAnchor===t.HorizontalAnchor.PROPORTIONAL&&(this._rightEdgeDistance=h[0]/o),this._bottomEdgeAnchor===t.VerticalAnchor.WINDOW_TOP?this._bottomEdgeDistance=h[1]:this._bottomEdgeAnchor===t.VerticalAnchor.WINDOW_BOTTOM?this._bottomEdgeDistance=s-h[1]:this._bottomEdgeAnchor===t.VerticalAnchor.PROPORTIONAL&&(this._bottomEdgeDistance=h[1]/s),this._invalidDistances=!1}else{let r=0,h=0,A=0,l=0;this._leftEdgeAnchor===t.HorizontalAnchor.WINDOW_LEFT?r=this._leftEdgeDistance:this._leftEdgeAnchor===t.HorizontalAnchor.WINDOW_RIGHT?r=o-this._leftEdgeDistance:this._leftEdgeAnchor===t.HorizontalAnchor.PROPORTIONAL&&(r=this._leftEdgeDistance*o),this._topEdgeAnchor===t.VerticalAnchor.WINDOW_TOP?h=this._topEdgeDistance:this._topEdgeAnchor===t.VerticalAnchor.WINDOW_BOTTOM?h=s-this._topEdgeDistance:this._topEdgeAnchor===t.VerticalAnchor.PROPORTIONAL&&(h=this._topEdgeDistance*s),this._rightEdgeAnchor===t.HorizontalAnchor.WINDOW_LEFT?A=this._rightEdgeDistance:this._rightEdgeAnchor===t.HorizontalAnchor.WINDOW_RIGHT?A=o-this._rightEdgeDistance:this._rightEdgeAnchor===t.HorizontalAnchor.PROPORTIONAL&&(A=this._rightEdgeDistance*o),this._bottomEdgeAnchor===t.VerticalAnchor.WINDOW_TOP?l=this._bottomEdgeDistance:this._bottomEdgeAnchor===t.VerticalAnchor.WINDOW_BOTTOM?l=s-this._bottomEdgeDistance:this._bottomEdgeAnchor===t.VerticalAnchor.PROPORTIONAL&&(l=this._bottomEdgeDistance*s);const n=g.convertInverseCoords(r,h),c=g.convertInverseCoords(A,l);this._useLegacyBottomAndRightAnchors?(this._rightEdgeAnchor!==t.HorizontalAnchor.NONE&&this.owner.setWidth(c[0]-n[0]),this._bottomEdgeAnchor!==t.VerticalAnchor.NONE&&this.owner.setHeight(c[1]-n[1]),this._leftEdgeAnchor!==t.HorizontalAnchor.NONE&&this.owner.setX(n[0]+this.owner.getX()-this.owner.getDrawableX()),this._topEdgeAnchor!==t.VerticalAnchor.NONE&&this.owner.setY(n[1]+this.owner.getY()-this.owner.getDrawableY())):(this._rightEdgeAnchor!==t.HorizontalAnchor.NONE&&this._leftEdgeAnchor!==t.HorizontalAnchor.NONE?(this.owner.setWidth(c[0]-n[0]),this.owner.setX(n[0])):(this._leftEdgeAnchor!==t.HorizontalAnchor.NONE&&this.owner.setX(n[0]+this.owner.getX()-this.owner.getDrawableX()),this._rightEdgeAnchor!==t.HorizontalAnchor.NONE&&this.owner.setX(c[0]+this.owner.getX()-this.owner.getDrawableX()-this.owner.getWidth())),this._bottomEdgeAnchor!==t.VerticalAnchor.NONE&&this._topEdgeAnchor!==t.VerticalAnchor.NONE?(this.owner.setHeight(c[1]-n[1]),this.owner.setY(n[1])):(this._topEdgeAnchor!==t.VerticalAnchor.NONE&&this.owner.setY(n[1]+this.owner.getY()-this.owner.getDrawableY()),this._bottomEdgeAnchor!==t.VerticalAnchor.NONE&&this.owner.setY(c[1]+this.owner.getY()-this.owner.getDrawableY()-this.owner.getHeight())))}}doStepPostEvents(i){}};let d=t;d.HorizontalAnchor={NONE:0,WINDOW_LEFT:1,WINDOW_RIGHT:2,PROPORTIONAL:3},d.VerticalAnchor={NONE:0,WINDOW_TOP:1,WINDOW_BOTTOM:2,PROPORTIONAL:3},E.AnchorRuntimeBehavior=d,E.registerBehavior("AnchorBehavior::AnchorBehavior",E.AnchorRuntimeBehavior)})(gdjs||(gdjs={}));
//# sourceMappingURL=anchorruntimebehavior.js.map
